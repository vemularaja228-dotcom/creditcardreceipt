<script>
function calculate() {
  var amountAdded = parseFloat(document.getElementById("amountAdded").value);
  var bankAmount  = parseFloat(document.getElementById("bankAmount").value);
  var rate        = parseFloat(document.getElementById("platformRate").value) / 100;
  var fixedFee    = parseFloat(document.getElementById("fixedFee").value);

  var amount, platformFee, totalFee, toBank;

  if (!isNaN(amountAdded) && isNaN(bankAmount)) {
    amount = amountAdded;
    platformFee = amount * rate;
    totalFee = platformFee + fixedFee;
    toBank = amount - totalFee;

  } else if (isNaN(amountAdded) && !isNaN(bankAmount)) {
    toBank = bankAmount;
    amount = (toBank + fixedFee) / (1 - rate);
    platformFee = amount * rate;
    totalFee = platformFee + fixedFee;

  } else {
    alert("Enter only ONE value.");
    return;
  }

  var receipt =
"-------------------------------\n" +
"Siri Credit Card Services\n" +
"Transaction Receipt\n" +
"-------------------------------\n" +
"Amount     : ₹" + amount.toFixed(2) + "\n" +
"Platform % : " + (rate * 100).toFixed(2) + "%\n" +
"Platform ₹ : ₹" + platformFee.toFixed(2) + "\n" +
"Fixed Fee  : ₹" + fixedFee.toFixed(2) + "\n" +
"-------------------------------\n" +
"Total Fee  : ₹" + totalFee.toFixed(2) + "\n" +
"To Bank    : ₹" + toBank.toFixed(2) + "\n" +
"-------------------------------";

  var box = document.getElementById("receiptOutput");
  box.style.display = "block";
  box.textContent = receipt;
}

function shareWhatsApp() {
  var text = document.getElementById("receiptOutput").textContent.trim();
  if (!text) {
    alert("Generate receipt first.");
    return;
  }
  window.open("https://wa.me/?text=" + encodeURIComponent(text), "_blank");
}
</script>
